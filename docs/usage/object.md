# Object mode

MkAPI provides Object mode to embed object documentation
in your Markdown source.

## Package for demonstration

In this page, we use a demonstration package `examples`
to describe the Object mode of MkAPI.
This package includes one subpackage `styles`
and the `styles` subpackage includes two modules:
`google.py` and `numpy.py`
These two modules are style guides of docstrings:

- [Example Google Style Python Docstrings](https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html#example-google)

- [Example NumPy Style Python Docstrings](https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_numpy.html#example-numpy)

See [Napoleon](https://sphinxcontrib-napoleon.readthedocs.io/en/latest/) site
about two styles for more details.

The directory structure of the `examples` package is shown below:

``` sh
examples/
├─ __init__.py
└─ styles/
   ├─ __init__.py
   ├─ google.py
   └─ numpy.py
```

<style type="text/css">
.mkapi-container {
  border: dashed #22772288;
}
</style>

## Top level Package

First, let's see the top level package `examples`.
To embed the object documentation in a Markdown source,
you can write a Markdown syntax like:

```markdown
::: examples
```

The three collon (`:::`) must start at the begging of line,
followed by a space (` `) and an object fullname,
for example, `package.module.function`.
Here, just a pakcage name `examples`.
MkAPI scan Markdown source to find this syntax pattern and
then convert it into the corresponding object documentation
like this:

::: examples

!!! note
    In the above example, the green dashed border
    is just guide for eyes to clarify the region of
    the documentation generated by MkAPI.

In the above example, a horizontal gray line is an object
boundary to seperate successive objects.
A gray text above the line is the fullname
of the object.
Below the line, the object kind (*package*) and
(qualified) name (`examples`) are shown.
This part is a *heading* of the object documentation.

Below the heading, main contents of documentation
are rendered.
In the `examples` package case, the contents is a just
one-line summary for the package.

MkAPI can embed the source code of objects as well as their
documentation. For this, use *filters* like below:

```markdown
::: examples|source|bare
```

Here, two filters `source` and `bare` are used.

- `source` ー Embed source code instead of documentation.
- `bare` ー Omit the heading part so that only source code is rendered.

The output is shown below:

::: examples|source|bare

The above docstring is the only content of `examples/__init__.py`.

## Package with `__all__`

A pakcage can have an `__all__` attribute to provide names
that should be imported when `from package import *` is encountered.
(See "[Importing * From a Package][1]" of Python documentation.)

[1]:
https://docs.python.org/3/tutorial/modules.html#importing-from-a-package>

MkAPI recognizes the `__all__` attribute and automatically
list up the objects and categorizes them by kind
(*module*, *class*, *function*, or *attribute*).

In our example, `examples.styles` package have the `__all__` attribute.
Check the output:

```markdown
::: examples.styles
```

::: examples.styles

In the above example, `examples.styles` object documentation has
a **Classes** section that includes two classes:
`ExampleClassGoogle` and `ExampleClassNumpy`.
These names has a link to the object documentation to navigate you.
The summary line for a class is also shown for convinience.
Blow is the source code of `examples.styles/__init__.py`.

::: examples.styles|source|bare

Two modules (`google` and `numpy`) have their own class
with the same name of `ExampleClass`.
The parent package `examples.styles` uses `import` statement
with alias name (`ExampleClassGoogle` or `ExampleClassNumpy`)
to distinct these two classes.
The **Classes** section shows these alias names, but you can check
the unaliased fullname by hovering mouse cursor on the names.

!!! Note
    Currently, MkAPI doesn't support dynamic assignment to `__all__`.
    For example, the below code are just ignored:

    ```python
    def get_all():
        return ["a", "b", "c"]

    __all__ = get_all()
    ```

## Module

Python module has classes, functions, or attributes as its members.
A Module documentation can be a docstring of module itself written by the
author and members list automatically generated by MkAPI.

```markdown
::: examples.styles.google
```

::: examples.styles.google

!!! warning
    Currently, MkAPI supports a small subset of reStructuredText formatting:
    `.. code-block::`, `.. note::`, `.. warning::`,  and `.. deprecated::`
    directives. The following content must be indented by four spaces from the
    start indent of directives.

You can check the corresponding docstring
[here][examples.styles.google|source].

!!! note
    You can link a Markdown text to object (1) documentation or (2) source:

    1. `[some text][examples.styles.google]`
    2. `[some text][examples.styles.google|source]`

## Module members

The last part of this page is for module's members.
The syntax to embed these objects is the same as package or module.
But here, a new filter `sourcelink` is introduced.

### Class

`examples.styles.goole` has a `ExampleClass` class.
You can write like below:

```markdown
::: examples.styles.google.ExampleClass|sourcelink
```

A new `sourcelink` filter is added at the end of the line.
This filter creates a link to the source code
to enable to visit it easily.
Let's see the output.
A `[source]` tag is added in the right side of the heading .
You can click it to see the code.

A function or attribute can also be embeded in Markdown source
in the same way as described above.

There are another useful feature.
The heading of object documentation contains the fullname of an object.
This fullname has hierarchical links to parent objects.
In the below examples, the fullname is:

    examples.styles.google.ExampleClass

Here,

- The first segment `examples` has a link to the top level pakcage `examples`.
- The second segment `styles` has a link to the subpakcage `examples.styles`.
- The third segment `google` has a link to the module `examples.styles.google`.
- The final segment `ExampleClass` is the corresponding object itself so that a link
  has been omitted.

You can check these links by hovering mouse cursor on the name segments.

::: examples.styles.google.ExampleClass|sourcelink

!!! warning
    "\_\_init\_\_" should be written in an inline code (\`\_\_init\_\_\`)
    or explicitly escaped (\\\_\\\_init\\\_\\\_).

!!! note
    Currently, `__special__` or `_private` members are treated as
    a normal member.

### Function

```markdown
::: examples.styles.google.module_level_function
```

::: examples.styles.google.module_level_function

### Attribute

```markdown
::: examples.styles.google.module_level_variable2
```

::: examples.styles.google.module_level_variable2
